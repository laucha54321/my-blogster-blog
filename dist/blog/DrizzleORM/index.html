<!DOCTYPE html>
<html class="theme-newspaper astro-WWZ2PMX7" lang="en">
  <head>
    <!-- Global Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="Blogster">
    <meta name="theme-color" content="#ffffff">

<!-- 
  This is an example. 
  Use https://realfavicongenerator.net to generate the icons and manifest. 
-->
<link href="/favicon.ico" rel="shortcut icon">

    <!-- Primary Meta Tags --><title>Prueba de Conceptos - Drizzle ORM</title>
<meta name="title" content="Prueba de Conceptos - Drizzle ORM">
<meta name="description" content="Bienvenido a mi Blog!">


<!-- Open Graph / Facebook -->
<meta property="og:title" content="Prueba de Conceptos - Drizzle ORM">
<meta property="og:description" content="Bienvenido a mi Blog!">
<meta property="og:type" content="article">
<meta property="og:url" content="https://yourwebsiteurl.com/blog/DrizzleORM">
<meta property="article:author" content="Laureano Oliva">
<meta property="article:published_time" content="2023-10-28T00:00:00.000Z">





<!-- Twitter -->
<meta property="twitter:title" content="Prueba de Conceptos - Drizzle ORM">
<meta property="twitter:description" content="Bienvenido a mi Blog!">
<meta property="twitter:site" content="@yourtwitterhandle">
<meta property="twitter:creator" content="@yourtwitterhandle">
<meta property="twitter:card" content="summary_large_image">


<!-- {twitter.url && <meta property="twitter:url" content={twitter.url} />} -->

    <!-- 
    We don't want to use <link /> to load fonts from Google CDN 
    but if you want to switch font this is the easiest way 
    to check how your page will look with the new font.
--><!-- 
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;0,800;1,400;1,700&display=block"
        rel="stylesheet"
    />
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;0,800;1,400&display=swap"
        rel="stylesheet"
    />
--><link rel="preload" href="/fonts/roboto-mono-v22-latin-regular.woff2" as="font" type="font/woff2" crossorigin="crossorigin"><link rel="preload" href="/fonts/roboto-mono-v22-latin-700.woff2" as="font" type="font/woff2" crossorigin="crossorigin"><link rel="preload" href="/fonts/roboto-mono-v22-latin-italic.woff2" as="font" type="font/woff2" crossorigin="crossorigin"><style>
    /* roboto-mono-regular - latin */
    @font-face {
      font-family: "Roboto Mono";
      font-style: normal;
      font-weight: 400;
      src: local(""),
        url("/fonts/roboto-mono-v22-latin-regular.woff2") format("woff2"),
        /* Chrome 26+, Opera 23+, Firefox 39+ */
          url("/fonts/roboto-mono-v22-latin-regular.woff") format("woff"); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
    }

    /* roboto-mono-700 - latin */
    @font-face {
      font-family: "Roboto Mono";
      font-style: normal;
      font-weight: 700;
      src: local(""),
        url("/fonts/roboto-mono-v22-latin-700.woff2") format("woff2"),
        /* Chrome 26+, Opera 23+, Firefox 39+ */
          url("/fonts/roboto-mono-v22-latin-700.woff") format("woff"); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
    }

    /* roboto-mono-italic - latin */
    @font-face {
      font-family: "Roboto Mono";
      font-style: italic;
      font-weight: 400;
      src: local(""),
        url("/fonts/roboto-mono-v22-latin-italic.woff2") format("woff2"),
        /* Chrome 26+, Opera 23+, Firefox 39+ */
          url("/fonts/roboto-mono-v22-latin-italic.woff") format("woff"); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
    }
  </style>

    <script>
  // figure out user's preferred theme and set it as html class for tailwind before paint
  (function () {
    if (typeof window !== "undefined") {
      const isSystemColorSchemeDark = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;
      const storageTheme = sessionStorage.getItem("theme");
      if (!storageTheme && isSystemColorSchemeDark) {
        document.documentElement.classList.add("dark");
        document.head.children.namedItem("theme-color").content = "#262626";
      } else if (storageTheme === "dark") {
        document.documentElement.classList.add("dark");
        document.head.children.namedItem("theme-color").content = "#262626";
      } else {
        // we already server render light theme
        document.head.children.namedItem("theme-color").content = "#ffffff";
      }
    }
  })();
</script>

    <link href="/fontawesome/css/fontawesome.css" rel="stylesheet"><link href="/fontawesome/css/brands.css" rel="stylesheet"><link href="/fontawesome/css/solid.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/assets/_slug_.dce679b3.css" />
<link rel="stylesheet" href="/assets/_slug_.80c17dee.css" /><script type="module" src="/hoisted.c2fbbe1c.js"></script></head>

  <body class="max-w-3xl mx-auto min-h-screen px-6 sm:px-8 astro-WWZ2PMX7">
    <header class="astro-VV76ZG2G">
  <a class="unset absolute z-10 left-[50%] -top-[100rem] translate-x-[-50%] bg-white text-black px-8 py-2 focus:top-[initial] astro-VV76ZG2G" href="#main">
    Skip to content
  </a>
  <nav class="astro-VV76ZG2G">
    <section class="text-text-bold astro-VV76ZG2G">
      <ul class="unset flex gap-4 [&>li]:p-0 astro-VV76ZG2G">
        <li class="astro-VV76ZG2G"><!-- DO NOT FORMAT. IT ADDS AN EXTRA SPACE ON RENDERED CONTENT. --><a href="/" class="astro-VV76ZG2G unset animated-link">Home</a></li>
        <li class="astro-VV76ZG2G"><!-- DO NOT FORMAT. IT ADDS AN EXTRA SPACE ON RENDERED CONTENT. --><a href="/blog" class="astro-VV76ZG2G show unset animated-link">Blog</a></li>
        <li class="astro-VV76ZG2G"><!-- DO NOT FORMAT. IT ADDS AN EXTRA SPACE ON RENDERED CONTENT. --><a href="/projects" class="astro-VV76ZG2G unset animated-link">Proyectos</a></li>
      </ul>
    </section>
  </nav>
  <div class="justify-self-end flex items-center content-center text-text-bold astro-VV76ZG2G">
    <mode-toggle class="flex astro-ZBNHZGTA">
  <button class="justify-self-end bg-black dark:bg-white ml-4 inline-flex h-6 w-11 items-center rounded-full astro-ZBNHZGTA" id="mode-toggle" role="switch" type="button" tabindex="0" aria-checked="false" data-headlessui-state=""><span class="sr-only astro-ZBNHZGTA">Toggle dark mode</span><span id="mode-circle" class="light inline-block h-4 w-4 rounded-full bg-gradient-to-tr invisible astro-ZBNHZGTA"><span class="absolute top-0 right-0 w-[10px] h-[10px] rounded-full bg-white scale-[0] astro-ZBNHZGTA"></span>
    </span>
  </button>
</mode-toggle>

<script>
  function updateHTMLTheme(mode) {
    const themeColorMetaTag = document.head.querySelector(
      'meta[name="theme-color"]'
    );

    if (mode === "dark") {
      document.documentElement.classList.remove("light");
      document.documentElement.classList.add("dark");
      if (themeColorMetaTag) {
        // @ts-ignore
        themeColorMetaTag.content = "#262626";
      }
    } else {
      document.documentElement.classList.remove("dark");
      document.documentElement.classList.add("light");
      if (themeColorMetaTag) {
        // @ts-ignore
        themeColorMetaTag.content = "#ffffff";
      }
    }
  }
  function updateStorageTheme(mode) {
    if (mode === "dark") {
      sessionStorage.setItem("theme", "dark");
    } else {
      sessionStorage.setItem("theme", "light");
    }
  }
  class ModeToggle extends HTMLElement {
    constructor() {
      super();
      // keep a property to track current mode
      this._currentMode = document.documentElement.classList.contains("dark") ? "dark" : "light";
    }

    connectedCallback() {
      const toggle = this.querySelector("button");
      const iconElem = toggle?.querySelector("#mode-circle");

      if (!iconElem || !toggle) return;

      // set the toggle mode based on the html classname set in ThemeScript.astro
      if (this._currentMode === "dark") {
        iconElem.classList.remove("light");
        iconElem.classList.add("dark");
      }

      // we load the toggle invisible to prevent flash
      // remove visibility class after setting initial dark/light class
      iconElem.classList.remove("invisible");

      // Each time the button is clicked, update the mode.
      toggle.addEventListener("click", () => {
        if (this._currentMode === "dark") {
          const modeToSwitch = "light";
          iconElem.classList.remove("dark");
          iconElem.classList.add("light");
          updateHTMLTheme(modeToSwitch);
          updateStorageTheme(modeToSwitch);
          this._currentMode = modeToSwitch;
        } else {
          const modeToSwitch = "dark";
          iconElem.classList.remove("light");
          iconElem.classList.add("dark");
          updateHTMLTheme(modeToSwitch);
          updateStorageTheme(modeToSwitch);
          this._currentMode = modeToSwitch;
        }

        // prevent slide animation on page load for dark mode
        if (!iconElem.classList.contains("duration-300")) {
          iconElem.classList.add("duration-300");
        }
      });
    }
  }

  if (!customElements.get("mode-toggle")) {
    customElements.define("mode-toggle", ModeToggle);
  }
</script>


  </div>
</header>

    
    <script type="text/x-mathjax-config">
      MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
          processEscapes: true,
        },
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <main id="main" class="astro-WWZ2PMX7">
      <section class="blog-post prose max-w-none prose-newspaper astro-WWZ2PMX7">
        <h1 class="m-0 pt-1 mb-[0.375em] after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current astro-WWZ2PMX7">
          Prueba de Conceptos - Drizzle ORM
        </h1>
        <time class="block mb-[2em] text-text-muted astro-WWZ2PMX7">Oct 27, 2023</time>
        <article><p>Informe de la Presentación de ORM - Drizzle ORM</p><h1 id="documentacion" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
          <a aria-label="link to this heading" aria-describedby="Documentación" href="#documentacion" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
              <i class="fa-solid fa-hashtag"></i>
          </a>
      </span><span>Documentación</span></h1><p>La documentación de Drizzle es efectiva, siendo al mismo tiempo simple y completa. Proporciona las pautas necesarias para una implementación correcta de Drizzle.</p><hr/><h1 id="comunidad" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
          <a aria-label="link to this heading" aria-describedby="Comunidad" href="#comunidad" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
              <i class="fa-solid fa-hashtag"></i>
          </a>
      </span><span>Comunidad</span></h1><p>La comunidad de Drizzle es muy dinámica y, según las tendencias actuales, es probable que se convierta en uno de los ORMs más populares en el entorno de TypeScript. A pesar de tener menos estrellas en GitHub en comparación con Prisma, es importante destacar que Drizzle es un proyecto más reciente.</p><p><img src="/images/star-history-20231026.webp" alt="Estrellas Repositorios"/></p><hr/><h1 id="soporte-de-bases-de-datos" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
          <a aria-label="link to this heading" aria-describedby="Soporte de Bases de Datos" href="#soporte-de-bases-de-datos" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
              <i class="fa-solid fa-hashtag"></i>
          </a>
      </span><span>Soporte de Bases de Datos</span></h1><p>Drizzle es compatible con las principales bases de datos utilizadas en el mercado, como PostgreSQL, MySQL y SQLite. Lo que diferencia a Drizzle de otras soluciones es su capacidad para proporcionar bibliotecas específicas, a las cuales se refieren como &quot;dialectos,&quot; para cada una de estas bases de datos. Esto permite que Drizzle ofrezca funciones adaptadas a las particularidades de cada sistema de gestión de bases de datos, en lugar de utilizar bibliotecas genéricas.</p><hr/><h1 id="proceso-de-desarrollo" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
          <a aria-label="link to this heading" aria-describedby="Proceso de Desarrollo" href="#proceso-de-desarrollo" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
              <i class="fa-solid fa-hashtag"></i>
          </a>
      </span><span>Proceso de Desarrollo</span></h1><div class="after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current">
  <!-- TODO: Rethink how to add the bottom border. Shouldn't wrap hx in div.
  should wrap div in hx. -->
    <h2 id="formato-de-los-datos" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
            <a aria-label="link to this heading" aria-describedby="Formato de los Datos" href="#formato-de-los-datos" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
                <i class="fa-solid fa-hashtag"></i>
            </a>
        </span><span>Formato de los Datos</span></h2>
  </div><p>Drizzle emplea TypeScript para definir la estructura de los datos (esquema).</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> cliente <span class="token operator">=</span> <span class="token function">pgTable</span><span class="token punctuation">(</span><span class="token string">"cliente"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token function">uuid</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">defaultRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">primaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> clienteRelations <span class="token operator">=</span> <span class="token function">relations</span><span class="token punctuation">(</span>cliente<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> many <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  pedido<span class="token operator">:</span> <span class="token function">many</span><span class="token punctuation">(</span>pedido<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pedido <span class="token operator">=</span> <span class="token function">pgTable</span><span class="token punctuation">(</span><span class="token string">"pedido"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token function">uuid</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">defaultRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">primaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  cliente_id<span class="token operator">:</span> <span class="token function">uuid</span><span class="token punctuation">(</span><span class="token string">"cliente_id"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> cliente<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>En este caso se establece una clave foránea en la entidad &quot;pedido&quot; que hace referencia al cliente que realiza el pedido, lo que crea una relación entre las entidades &quot;cliente&quot; y &quot;pedido&quot;.</p><p>Drizzle nos provee con la posibilidad de usar un solo archivo <code>.ts</code> para hacer esquema de los datos o utilizar un directorio con un varios archivos <code>.ts</code> para organizar nuestras estructuras en distintos archivos.</p><p>Nuestra opinión sobre la definición del esquema es que Drizzle podría sacrificar cierta legibilidad al optar por utilizar TypeScript para definir las relaciones entre los datos. Si uno está familiarizado con TypeScript, esto puede no ser un problema significativo, pero en nuestra opinión, la forma en que Prisma aborda esta tarea resulta más legible.</p><div class="after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current">
  <!-- TODO: Rethink how to add the bottom border. Shouldn't wrap hx in div.
  should wrap div in hx. -->
    <h2 id="migraciones" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
            <a aria-label="link to this heading" aria-describedby="Migraciones" href="#migraciones" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
                <i class="fa-solid fa-hashtag"></i>
            </a>
        </span><span>Migraciones</span></h2>
  </div><p>Una vez que se ha realizado una modificación en el esquema de datos en Drizzle, basta con ejecutar un comando, y el sistema se encarga de aplicar los cambios en la base de datos. Este proceso es muy similar al funcionamiento de Prisma. La principal distinción entre Drizzle y Prisma radica en el uso de TypeScript para definir el esquema en Drizzle, mientras que Prisma utiliza su propia sintaxis.</p><p>Drizzle también incluye una función interesante que se activa cuando se renombra una columna. Esta función permite crear una nueva columna o modificar el nombre de la columna existente, evitando así la eliminación accidental de una columna.</p><p><img src="/images/image.png" alt="Menu Migración"/></p><div class="after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current">
  <!-- TODO: Rethink how to add the bottom border. Shouldn't wrap hx in div.
  should wrap div in hx. -->
    <h2 id="generar-el-cliente" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
            <a aria-label="link to this heading" aria-describedby="Generar el cliente" href="#generar-el-cliente" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
                <i class="fa-solid fa-hashtag"></i>
            </a>
        </span><span>Generar el cliente</span></h2>
  </div><p>Dado que Drizzle utiliza TypeScript para definir el esquema de datos, puede aprovechar la inferencia de manera directa. Por lo tanto, una vez que se han realizado los cambios en el esquema, no es necesario ejecutar una migración adicional para empezar a aprovechar esta inferencia.</p><div class="after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current">
  <!-- TODO: Rethink how to add the bottom border. Shouldn't wrap hx in div.
  should wrap div in hx. -->
    <h2 id="sintaxis-y-querys" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
            <a aria-label="link to this heading" aria-describedby="Sintaxis y Querys" href="#sintaxis-y-querys" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
                <i class="fa-solid fa-hashtag"></i>
            </a>
        </span><span>Sintaxis y Querys</span></h2>
  </div><p>Drizzle proporciona al usuario la posibilidad de utilizar operadores similares a los que se emplean en SQL al realizar consultas. La sintaxis utilizada en las consultas de Drizzle es muy parecida a la de SQL, aunque con un aspecto más estilizado. Además, se puede aprovechar la inferencia de TypeScript en estas consultas. En esencia, Drizzle se basa en SQL, lo que puede considerarse tanto una ventaja como una desventaja, dependiendo de la familiaridad del usuario con el SQL.</p><p>En contraste, Prisma utiliza algunos operadores que resultan más amigables para aquellos que no están familiarizados con SQL. Esta diferencia en enfoque es importante y debe ser tenida en cuenta al elegir entre Drizzle y Prisma. El formato de la tabla seria el siguiente:</p><p><img src="/images/image-4.png" alt="Alt text"/></p><p>El siguiente seria el formato de los datos:</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token function">pgTable</span><span class="token punctuation">(</span><span class="token string">"posts"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token function">serial</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">primaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> postsRelations <span class="token operator">=</span> <span class="token function">relations</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> many <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  comments<span class="token operator">:</span> <span class="token function">many</span><span class="token punctuation">(</span>comments<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token function">pgTable</span><span class="token punctuation">(</span><span class="token string">"comments"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token function">serial</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">primaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  postId<span class="token operator">:</span> <span class="token function">integer</span><span class="token punctuation">(</span><span class="token string">"post_id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> posts<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Y este es un ejemplo de query hecho a las dos tablas.</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">await</span> db<span class="token punctuation">.</span>query<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">where</span><span class="token operator">:</span> <span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token punctuation">{</span> eq <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">eq</span><span class="token punctuation">(</span>posts<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">with</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    comments<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">where</span><span class="token operator">:</span> <span class="token punctuation">(</span>comments<span class="token punctuation">,</span> <span class="token punctuation">{</span> lt <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">lt</span><span class="token punctuation">(</span>comments<span class="token punctuation">.</span>createdAt<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>En este ejemplo con Drizzle, estamos realizando una búsqueda de un post con id = 1. El operador eq se encarga de la operación de igualdad, lo que significa que estamos buscando un post cuyo identificador sea igual a 1. Además, se utiliza el operador lt, que significa &quot;menor que&quot; (less than), para seleccionar comentarios con una fecha de creación anterior a la fecha actual, representada por new Date().</p><hr/><h1 id="performance" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
          <a aria-label="link to this heading" aria-describedby="Performance" href="#performance" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
              <i class="fa-solid fa-hashtag"></i>
          </a>
      </span><span>Performance</span></h1><p>Drizzle se destaca por su velocidad como ORM, ya que consiste en una fina capa de abstracción en TypeScript sobre SQL. A diferencia de otros ORMs, como Prisma, Drizzle realiza únicamente una consulta (query) por cada sentencia.</p><p>En contraste, Prisma se considera más lento en comparación con Drizzle. Prisma utiliza un motor escrito en Rust que inicialmente se diseñó para admitir múltiples lenguajes, pero en la actualidad, Prisma ha dejado de brindar soporte a GoLang, y su enfoque se centra en TypeScript y JavaScript. Además, Prisma utiliza múltiples consultas para realizar operaciones de unión (joins) en la base de datos. En lugar de que la base de datos realice los joins directamente a través de SQL, Prisma trae los datos a su motor en Rust y realiza las operaciones de unión allí. Esto obliga a realizar múltiples consultas a diferentes tablas para recopilar el conjunto completo de datos que se necesita para las operaciones de unión.</p><p>Drizzle aborda este proceso de manera más eficiente, ya que traduce su sintaxis a una sentencia SQL y, por lo tanto, puede realizar una sola consulta a la base de datos. Este enfoque agiliza significativamente el rendimiento de Drizzle en comparación con Prisma.</p><div class="after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current">
  <!-- TODO: Rethink how to add the bottom border. Shouldn't wrap hx in div.
  should wrap div in hx. -->
    <h2 id="prepeared-statements" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
            <a aria-label="link to this heading" aria-describedby="Prepeared Statements" href="#prepeared-statements" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
                <i class="fa-solid fa-hashtag"></i>
            </a>
        </span><span>Prepeared Statements</span></h2>
  </div><p>Un aspecto sumamente útil que nos proporciona Drizzle es la capacidad de utilizar Prepared Statements (Declaraciones Preparadas). Estas declaraciones preparadas permiten, en lugar de llamar al generador de consultas cada vez que necesitamos realizar una consulta, construir la consulta y dejarla preparada para su uso a través de una constante en JavaScript. Esto nos habilita la posibilidad de emplear estas consultas preparadas con variables internas, lo cual optimiza el tiempo necesario para construir la consulta en el momento de su ejecución.</p><p>A continuación, se presenta un ejemplo de cómo se utilizan las declaraciones preparadas en Drizzle:</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> p1 <span class="token operator">=</span> db
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>customers<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token function">eq</span><span class="token punctuation">(</span>customers<span class="token punctuation">.</span>id<span class="token punctuation">,</span> sql<span class="token punctuation">.</span><span class="token function">placeholder</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">"p1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> p1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> p1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Este enfoque ahorra tiempo en la traducción de la consulta a SQL en cada ejecución, ya que la consulta se construye una vez y se almacena en la constante &quot;p1&quot;. Luego, simplemente utilizamos la consulta que se había preparado anteriormente. Comparado con la alternativa en la que se genera la consulta desde cero en cada ejecución, este enfoque resulta más eficiente y beneficioso.</p><div class="after:mt-6 after:content-[''] after:block after:h-[1px] after:w-[100%] after:border-b-[1px] after:border-current">
  <!-- TODO: Rethink how to add the bottom border. Shouldn't wrap hx in div.
  should wrap div in hx. -->
    <h2 id="benchmarks" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
            <a aria-label="link to this heading" aria-describedby="Benchmarks" href="#benchmarks" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
                <i class="fa-solid fa-hashtag"></i>
            </a>
        </span><span>Benchmarks</span></h2>
  </div><p>Desde un punto de vista técnico, es relevante mencionar que estos benchmarks son elaborados por el propio equipo de Drizzle. Aunque provienen de fuentes internas, estos benchmarks tienen un valor significativo al ilustrar las diferencias de rendimiento entre Drizzle y otras soluciones ORM. Además, ofrecen datos comparativos que muestran cómo se comporta Drizzle al utilizar declaraciones preparadas en comparación con el escenario donde no se utilizan. Estos resultados resultan esenciales para comprender el rendimiento de Drizzle en diversas situaciones, lo que los convierte en una valiosa fuente de información al evaluar su idoneidad para proyectos específicos.</p><p>Este conjunto de pruebas nos proporciona información sobre la cantidad promedio de consultas por segundo. Para ilustrar este punto, comencemos con los datos relacionados con una operación &quot;select all&quot;.</p><p><img src="/images/image-2.webp" alt="Benchmark Select"/></p><p>Como se puede observar, incluso en una consulta aparentemente sencilla, como un &quot;select all,&quot; se aprecia una marcada diferencia en la cantidad de consultas realizadas por segundo entre el uso de &quot;prepared statements&quot; y la omisión de los mismos.</p><p><img src="/images/image-3.webp" alt="Benchmark Join"/></p><p>En este ejemplo, que implica una consulta algo más compleja al incluir un &quot;select,&quot; &quot;where&quot; y un &quot;left join,&quot; la diferencia en el rendimiento es aún más evidente. Preparar una consulta de esta magnitud en cada ejecución tiene un impacto notable en la cantidad de consultas que se pueden realizar por segundo.</p><hr/><h1 id="conclusion" class="group flex -ml-[1rem]"><span class="not-prose w-[1rem] -mt-[0.125rem]">
          <a aria-label="link to this heading" aria-describedby="Conclusion" href="#conclusion" class="unset align-middle text-[14px] text-text-link opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 group-active:opacity-100 active:opacity-100">
              <i class="fa-solid fa-hashtag"></i>
          </a>
      </span><span>Conclusion</span></h1><p>Drizzle es una herramienta que destaca por su flexibilidad y sencillez. A pesar de su simplicidad, logra ofrecer un rendimiento superior en comparación con la mayoría de los ORMs populares, especialmente cuando se utilizan prepared statements.</p><p>Sin embargo, es importante tener en cuenta que al utilizar Drizzle, es necesario gestionar las operaciones de &quot;left join&quot; manualmente. Por lo tanto, si estás buscando una herramienta que te libere completamente de escribir SQL, es posible que Drizzle no sea la mejor opción en ese aspecto.</p><p>En resumen, Drizzle se presenta como una elección ideal para aquellos que buscan una ORM que facilite la administración de migraciones y la definición del esquema de datos de manera sencilla. Si además valoras la velocidad, Drizzle, especialmente cuando se utilizan prepared statements y teniendo en cuenta que genera solo una consulta por cada sentencia, se convierte en una de las opciones más sólidas.</p></article>
      </section>
    </main>
    <footer class="text-sm leading-[1.75] mt-4 astro-OA3G2NKD">
  <div class="astro-OA3G2NKD">
    Este blog utiliza <a class="unset gradient-link tracking-wider font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#00abda] to-[#1476ff] hover:after:bg-gradient-to-r hover:after:from-[#00abda] hover:after:to-[#1476ff] astro-OA3G2NKD" href="https://astro.build" target="_blank">Astro</a> con el template <a class="unset gradient-link tracking-wider font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#00abda] to-[#1476ff] hover:after:bg-gradient-to-r hover:after:from-[#00abda] hover:after:to-[#1476ff] astro-OA3G2NKD" href="https://github.com/flexdinesh/blogster" target="_blank">Blogster Newspaper</a>
  </div>
</footer>


    
  </body>
</html>